{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"cc-plugin-wcrp","text":"<p>A WCRP-specific plugins for the IOOS Compliance Checker. It provides automated quality control (QC) and compliance validation for WCRP-related datasets, including CMIP6, CORDEX, and related projects.</p>"},{"location":"#what-is-it","title":"What is it?","text":"<p><code>cc-plugin-wcrp</code> extends the IOOS Compliance Checker with a comprehensive suite of checks derived from ESGF and WCRP data standards. </p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>\ud83e\udde9 Plugin-based architecture \u2014 integrates seamlessly into the Compliance Checker framework  </li> <li>\u2699\ufe0f Configurable via TOML files \u2014 defines severity levels, project-specific checks, and thresholds  </li> <li>\ud83d\udd0d Covers all validation layers:</li> <li>Global and variable attributes  </li> <li>Dimensions and coordinates  </li> <li>File naming and DRS path structure  </li> <li>Time continuity and consistency  </li> <li>Data plausibility</li> <li>\ud83d\udcca Flexible outputs \u2014 JSON, text, and HTML reports  </li> <li>\ud83e\udde0 Extensible design \u2014 easily add new checks or adapt existing ones per project or dataset type  </li> </ul>"},{"location":"cf_feature_parity_matrix/","title":"CF Feature Parity Matrix","text":"<p>This document is intended to show where the IOOS Compliance Checker supports CF features as outlined by the conformance lists and conventions documents. Most CF features are supported, but several are either partially implemented or are not presently implemented, as denoted by the table below.</p> Section Implemented Notes GitHub Tracking Issue 2.1. Filename yes 2.2. Data Types yes 2.3. Naming Conventions yes 2.4. Dimensions yes 2.5. Variables yes 2.5.1. Missing data, valid and actual range of data yes 2.6. Attributes yes 2.6.1. Identification of Conventions yes 2.6.2. Description of file contents yes 2.6.3. External Variables yes 2.7. Groups no Handling code exists, not implemented on checker level.  Requires significant code changes to code that references other variables or attributes. https://github.com/ioos/compliance-checker/issues/945 2.7.1. Scope \" 2.7.2. Application of attributes \" 3. Description of the Data yes 3.1. Units yes 3.2. Long Name yes 3.3. Standard Name yes 3.4. Ancillary Data yes 3.5. Flags yes 4. Coordinate Types yes 4.1. Latitude Coordinate yes 4.2. Longitude Coordinate yes 4.3. Vertical (Height or Depth) Coordinate yes 4.3.1. Dimensional Vertical Coordinate yes 4.3.2. Dimensionless Vertical Coordinate yes 4.3.3. Parametric Vertical Coordinate yes 4.4. Time Coordinate yes 4.4.1. Calendar yes 4.5. Discrete Axis yes 5. Coordinate Systems and Domain partial Needs ragged and indexed array support https://github.com/ioos/compliance-checker/issues/949 5.1. Independent Latitude, Longitude, Vertical, and Time Axes yes 5.2. Two-Dimensional Latitude, Longitude, Coordinate Variables yes 5.3. Reduced Horizontal Grid yes 5.4. Timeseries of Station Data yes 5.5. Trajectories yes 5.6. Horizontal Coordinate Reference Systems, Grid Mappings, and Projections partial Needs implementation of a few more sections https://github.com/ioos/compliance-checker/issues/950 5.6.1. Use of the CRS Well-known Text Format yes 5.7. Scalar Coordinate Variables yes 5.8. Domain Variables yes 6. Labels and Alternative Coordinates yes 6.1. Labels yes 6.1.1. Geographic Regions partial Implicit from handling of standard names - does not check region names 6.1.2. Taxon Names and Identifiers yes 6.2. Alternative Coordinates no? 7. Data Representative of Cells yes 7.1. Cell Boundaries yes 7.2. Cell Measures yes 7.3. Cell Methods yes 7.3.1. Statistics for more than one axis yes 7.3.2. Recording the spacing of the original data and other information yes 7.3.3. Statistics applying to portions of cells yes 7.3.4. Cell methods when there are no coordinates ? 7.4. Climatological Statistics yes 7.5. Geometries partial Various portions of the geometry section need to be implemented to bring in line with conformance doc. See issue. https://github.com/ioos/compliance-checker/issues/955 8. Reduction of Dataset Size yes 8.1. Packed Data partial 8.2. Lossless Compression by Gathering yes 8.3. Lossy Compression by Coordinate Subsampling no Section requires considerable work to implement and not many files have been found with this interpolation. Presently not implemented even in development branches. https://github.com/ioos/compliance-checker/issues/957 8.3.1. Tie Points and Interpolation Subareas \" 8.3.2. Coordinate Interpolation Attribute \" 8.3.3. Interpolation Variable \" 8.3.4. Subsampled, Interpolated and Non-Interpolated Dimensions \" 8.3.5. Tie Point Mapping Attribute \" 8.3.6. Tie Point Dimension Mapping \" 8.3.7. Tie Point Index Mapping \" 8.3.8. Interpolation Parameters \" 8.3.9. Interpolation of Cell Boundaries \" 8.3.10. Interpolation Method Implementation \" 9. Discrete Sampling Geometries yes 9.1. Features and feature types yes 9.2. Collections, instances and elements yes 9.3. Representations of collections of features in data variables yes 9.3.1. Orthogonal multidimensional array representation yes 9.3.2.  Incomplete multidimensional array representation yes 9.3.3.  Contiguous ragged array representation yes 9.3.4. Indexed ragged array representation yes 9.4. The featureType  attribute yes 9.5. Coordinates and metadata yes 9.6. Missing Data ?"},{"location":"cf_plugin/","title":"CF Plugin (IOOS Compliance Checker)","text":"<p>The IOOS Compliance Checker ships with a native CF (Climate &amp; Forecast) metadata plugin. Many of those CF checks are directly relevant to WCRP projects (CMIP, CORDEX, \u2026). To avoid redundancy, we did not duplicate these validations inside ESGF-QC.</p>"},{"location":"cf_plugin/#where-to-find-detailed-cf-checks","title":"Where to find detailed CF checks","text":"<ul> <li> <p>Official IOOS Compliance Checker documentation (complete list and descriptions):   https://ioos.github.io/compliance-checker/</p> </li> <li> <p>Our internal summary spreadsheet : Checks_QC_Table</p> </li> </ul> <p>You can alse see the CF Convention website : https://cfconventions.org/</p>"},{"location":"checks/","title":"Checks Overview","text":"<p>cc_plugin-wcrp is built from many atomic checks, grouped by category. Eah plugin (e.g., <code>wcrp_cmip6</code>, <code>wcrp_cordex_cmip6</code>) just decides which ones to run; each category focuses on a specific aspect of file quality.</p>"},{"location":"checks/#dimension-checks","title":"\ud83d\udccf Dimension Checks","text":"<p>Ensure that all dimensions exist and match the variable shapes. These checks confirm that: - Dimensions (e.g. <code>time</code>, <code>lat</code>, <code>lon</code>, <code>bnds</code>) are present. - Their sizes are positive and coherent with variable shapes. - Bounds variables (e.g. <code>time_bnds</code>) are consistent in size and order.</p>"},{"location":"checks/#variable-checks","title":"\ud83d\udcca Variable Checks","text":"<p>Ensure variables are present, their shape matches their dimensions, and (when bounds are declared) each value lies within its bounds.</p>"},{"location":"checks/#time-checks","title":"\u23f1\ufe0f Time Checks","text":"<p>Focus on the <code>time</code> axis: presence of bounds with the right shape, and consistency between the time axis and the filename\u2019s time range.</p>"},{"location":"checks/#attribute-checks","title":"\ud83c\udff7\ufe0f Attribute Checks","text":"<p>Check that mandatory global and variable attributes are there, correctly typed/encoded, and their values are valid against regex patterns or controlled vocabularies.</p>"},{"location":"checks/#drs-path-consistency-checks","title":"\ud83d\udcc1 DRS &amp; Path Consistency Checks","text":"<p>Validate filenames and directory paths and compare with the netcdf file's attributes; verify consistency between attributes like frequency vs table_id, <code>experiment_id</code>, <code>institution</code>, <code>variant_label</code>, etc., against project rules/CVs.</p>"},{"location":"checks/#data-plausibility-checks","title":"\ud83e\uddec Data Plausibility Checks","text":"<p>Perform data-level plausibility tests on numeric variables: - Check NaN and infinite . - Check Constant . - Check Fill Value or Missing values filling. - Detect Physically impossible or statistically extreme outliers. - Check Chunk size. - </p>"},{"location":"checks/#file-format-compression-checks","title":"\ud83d\udce6 File Format &amp; Compression Checks","text":"<p>These checks ensure that the NetCDF file format and compression options comply with project and ESGF recommendations.</p>"},{"location":"checks/#detailed-inventory","title":"Detailed Inventory","text":"<p>For the full list of checks (IDs, severities), see the spreadsheet :</p> <p>\ud83d\udd17Checks_QC_Table</p>"},{"location":"credits/","title":"Credit","text":"Acknowledgements <p>     We gratefully acknowledge the support of the Copernicus Climate Change Service - 382     and the PEPR TRACCS \u2013 PC2 project. </p> <p> </p>"},{"location":"installation/","title":"Overview &amp; Installation","text":""},{"location":"installation/#scientific-context","title":"\ud83c\udf0d Scientific Context","text":"<p>The WCRP projects (such as CMIP6, CORDEX, CORDEX-CMIP6) produce large volumes of NetCDF files. The cc-plugin-wcrp  provides plugins that call automated quality and consistency checks to verify compliance with WCRP Projects standards , including DRS structure, controlled vocabulary (CV), attributes, and temporal continuity.</p>"},{"location":"installation/#architecture-overview","title":"\u2699\ufe0f Architecture Overview","text":"Layer Component Description Base Framework IOOS Compliance Checker Provides the core plugin mechanism and test runner Plugin Package <code>cc-plugin-wcrp</code> Adds project-specific checks for CMIP6, CORDEX, and CORDEX-CMIP6 Controlled Vocabulary esgvoc Supplies the CV (activity_id, source_id, etc.) Configuration <code>wcrp_config.toml</code> Defines active checks, thresholds, and DRS rules"},{"location":"installation/#requirements","title":"\ud83e\udde9 Requirements","text":"<ul> <li>Python \u2265 3.10  </li> <li>Dependencies (installed automatically):</li> <li><code>netCDF4</code></li> <li><code>xarray</code></li> <li><code>cfchecker</code></li> <li><code>compliance-checker&gt;=5.1.2</code></li> <li><code>esgvoc</code></li> <li><code>cftime</code></li> <li><code>cf_xarray</code></li> <li><code>pooch</code></li> </ul>"},{"location":"installation/#installation","title":"\ud83d\udee0\ufe0f Installation","text":"<p>Pip Installation</p> <pre><code>pip install cc-plugin-wcrp\n</code></pre> <p>Pip Installation from source</p> <p>Clone the repository and cd into the repository folder, then:</p> <pre><code>pip install -e .\n</code></pre> <p>Esgvoc Installation</p> <p>Install Esgvoc and Universe to get the Controlled Vocabulary (Mandatory)</p> <pre><code>esgvoc config set universe:branch=esgvoc_dev\nesgvoc config add cordex-cmip6\nesgvoc install\n</code></pre> <p>\ud83d\udca1 Note: If you encounter a <code>[Errno 2] No such file or directory</code> error related to a missing file like <code>sfcwind.json</code> after running <code>esgvoc install</code>, simply run the same <code>esgvoc install</code> command again. This issue is usually resolved on the second attempt as it may result from a temporary initialization glitch.</p>"},{"location":"installation/#verify-the-installation","title":"Verify the installation:","text":"<p>For cc-plugin-wcrp :</p> <pre><code>compliance-checker -l\n</code></pre> <p>Normally, you should have a list of all available plugins with the compliance checker, in addition to the wcrp_cmip6 and wcrp_cordex_cmip6 plugins</p> <pre><code>IOOS compliance checker available checker suites:\n - acdd:1.1\n - acdd:1.3\n - cc6:0.4.0\n - cf:1.10\n - cf:1.11\n - cf:1.6\n - cf:1.7\n - cf:1.8\n - cf:1.9\n - ioos:0.1\n - ioos:1.1\n - ioos:1.2\n - ioos_sos:0.1\n - mip:0.4.0\n - wcrp_cmip6:1.0\n - wcrp_cordex_cmip6:1.0\n</code></pre> <p>For esgvoc :</p> <pre><code>esgvoc --help\n# or\npip show esgvoc\n</code></pre>"},{"location":"reporting/","title":"Reporting","text":"<p>This page explains what you get in each output format</p>"},{"location":"reporting/#1-text-format-f-text","title":"1. Text format (<code>-f text</code>)","text":"<ul> <li>Shows only problems by default. Passed checks are hidden.</li> <li>Ends with a short summary (e.g. <code>file.nc has X issues</code>).</li> </ul> <p>Example snippet (terminal):</p> <p> </p>"},{"location":"reporting/#2-json-formats-f-json-f-json_new","title":"2. JSON formats (<code>-f json</code>, <code>-f json_new</code>)","text":"<p>Contains every check (PASS or FAIL) with its details and adds two global counters:</p> <ul> <li><code>scored_points</code> = \u03a3(passed_assertions \u00d7 weight)</li> <li><code>possible_points</code> = \u03a3(total_assertions \u00d7 weight)<ul> <li>Weights: High = 3, Medium = 2, Low = 1.</li> </ul> </li> </ul> <p>Severity lists:</p> <ul> <li><code>high_priorities</code>, <code>medium_priorities</code>, <code>low_priorities</code> \u2192 only the severities active for the chosen criteria.</li> <li><code>all_priorities</code> \u2192 shows all priorities related to the chosen criteria.</li> </ul> <p>Criteria effect (-c):</p> <ul> <li><code>strict</code>: High + Medium + Low count in the decision.</li> <li><code>normal</code> (default): High + Medium count.</li> <li><code>lenient</code>: High only counts.</li> </ul> <p>Example snippet (terminal):</p> <p> </p>"},{"location":"usage/","title":"Usage","text":""},{"location":"usage/#running-the-wcrp-plugins","title":"\ud83d\ude80 Running the WCRP Plugins","text":"<p>To run the WCRP plugins , use the following command:</p> <pre><code>compliance-checker -t ''check''  ''filepath'' \n</code></pre> <p>Example for WCRP CMIP6 plugin : </p> <pre><code>compliance-checker  -t wcrp_cmip6:1.0  path/to/data/CMIP6/CMIP/IPSL/IPSL-CM5A2-INCA/historical/r1i1p1f1/Amon/pr/gr/v20240619/pr_Amon_IPSL-CM5A2-INCA_historical_r1i1p1f1_gr_185001-201412.nc\n</code></pre> <ul> <li>If you don\u2019t pass -f, the default output is text.</li> <li>Output Formats : text ( default) / html / json (single input file only) / json_new (handles multiple files).</li> </ul> <p>\u26a0\ufe0f CF plugin: Always run the CF checks as well when running the WCRP project checks, to ensure that CF-only checks (not duplicated in WCRP projects) are also verified.</p>"},{"location":"usage/#run-several-checks","title":"Run several checks","text":"<pre><code>compliance-checker   -t cf:1.11 -t wcrp_cmip6:1.0 path/to/data/CMIP6/CMIP/IPSL/IPSL-CM5A2-INCA/historical/r1i1p1f1/Amon/pr/gr/v20240619/pr_Amon_IPSL-CM5A2-INCA_historical_r1i1p1f1_gr_185001-201412.nc\n</code></pre>"},{"location":"usage/#save-output-to-a-file","title":"Save output to a file","text":"<pre><code>compliance-checker -t wcrp_cmip6:1.0 file.nc -f text(json/html) -o qc.txt(json/html)   \n</code></pre>"},{"location":"usage/#skip-include-specific-wcrp_project-checks","title":"Skip / Include Specific WCRP_Project Checks","text":"<ul> <li>Only use check names from the wcrp_project (wcrp_cmip6 for example) suite here.</li> </ul> <p>To skip checks :</p> <pre><code># Here we skip check_Global_Variable_Attributes from WCRP CMIP6 Plugin for example\ncompliance-checker -t wcrp_cmip6:1.0 file.nc -s  check_Global_Variable_Attributes\n</code></pre> <p>To include checks ( we do only checks belonging to this specific checks)</p> <pre><code># Here we do only check_Drs_Vocabulary from WCRP CMIP6 Plugin for example\ncompliance-checker -t wcrp_cmip6:1.0 file.nc -i check_Drs_Vocabulary\n</code></pre> <p>To list all available checks</p> <pre><code>compliance-checker -l \n</code></pre>"},{"location":"usage/#multiple-files","title":"Multiple files","text":"<ul> <li>Use shell wildcards/globs, and use json_new if you want one detailed JSON for all files:</li> </ul> <pre><code># Here we skip check_Global_Variable_Attributes from WCRP CMIP6 Plugin for example\ncompliance-checker -t wcrp_cmip6 /data/CMIP6/**/*.nc -f json_new \n</code></pre>"},{"location":"wcrp_plugins/","title":"The <code>WCRP</code> Plugins","text":"<p>The WCRP plugins provide project-specific compliance checks for WCRP datasets such as CMIP6 and CORDEX-CMIP6, built on top of the IOOS Compliance Checker.</p> <p>Each plugin has its own orchestration layer (<code>wcrp_project.py</code>), which acts as the controller for WCRP validation logic \u2014 deciding: - Which checks to run - With what severity - According to each project\u2019s configuration  </p>"},{"location":"wcrp_plugins/#available-plugins","title":"Available Plugins","text":"Plugin Name Checker Tag Description wcrp_cmip6 <code>wcrp_cmip6:1.0</code> Validation of CMIP6 NetCDF files wcrp_cordex_cmip6 <code>wcrp_cordex_cmip6:1.0</code> Validation of CORDEX-CMIP6 NetCDF files <p>Each plugin has its own TOML configuration file defining specific rules, severities, and variable mappings.</p>"},{"location":"wcrp_plugins/#what-each-plugin-does","title":"What Each Plugin Does","text":"<p>Each WCRP plugin:</p> <ol> <li>Loads its configuration file (<code>wcrp_cmip6.toml</code> or <code>wcrp_cordex_cmip6.toml</code>), which defines:</li> <li>Which checks to run (DRS, attributes, time, metadata, etc.)</li> <li> <p>The severity of each check (High = Mandatory, Medium = Recommended, Low = Warning)</p> </li> <li> <p>Runs the atomic checks implemented in <code>checks/\u2026</code>:</p> </li> <li> <p>Examples: dimension existence/size, variable shape, time bounds, filename/DRS consistency, physical plausibility, missing values, etc.</p> </li> <li> <p>Aggregates results and returns them to the Compliance Checker core,    which formats them into human-readable or machine-readable outputs (text, HTML, JSON).</p> </li> </ol>"},{"location":"wcrp_plugins/#toml-configuration-files","title":"TOML Configuration Files","text":"<p>Each plugin is driven by its own TOML file:</p> <ul> <li> <p><code>wcrp_cmip6.toml</code>   Main configuration for CMIP6 checks, mapping variables, severities, and project rules.</p> </li> <li> <p><code>wcrp_cordex_cmip6.toml</code>   Adapted version for CORDEX-CMIP6)context.</p> </li> <li> <p><code>mapping_variables.toml</code>   Helper file mapping <code>&lt;table_id&gt;.&lt;variable_id&gt;</code> to standard variable definitions   (dimensions, expected attributes, cell methods, etc.).   This is a temporary bridge until the official ESGVOC vocabulary exposes all required metadata.</p> </li> </ul>"}]}