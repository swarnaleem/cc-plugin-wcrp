# ==============================================================================
# ESGF-QC CMIP6 Configuration FILE 
# ==============================================================================
project_name = "wcrp_cordex-cmip6"
project_version = "1.0"

#------------------------------------------------------------------------------
# Format Checks
# -----------------------------------------------------------------------------
[format_checks.check_format]
severity = "H"
expected_format = "HDF5"
expected_data_model = "NETCDF4_CLASSIC"
#expected_data_model = "NETCDF4"


#------------------------------------------------------------------------------
# DRS Checks
# ------------------------------------------------------------------------------

[drs_checks]
severity = "H"

[drs_consistency_checks]
severity = "H"

#------------------------------------------------------------------------------
# Global Attributes to check 
# This section lists required  NetCDF global attributes for CORDEX-CMIP6 QC.
# Each entry defines:
#   - severity: "H" (High) (Mandatory) , "M" (Medium) (Warning), or "L" (Low) (Optional) priority
#   - expected_type: expected value type ("str", "int", "float")
# The 'constraint' key provides intelligent control over value validation:
#   - If 'constraint' is MISSING: A controlled vocabulary (ESG-VOC) check is performed by default (ATTR004).
#   - If 'constraint' HAS A VALUE (e.g., ".*@.*"): A regular expression pattern match is performed instead (ATTR005).
#   - If 'constraint' is PRESENT but EMPTY (e.g., constraint = ""): All value checks (vocabulary and pattern) are DISABLED for that attribute.
# ------------------------------------------------------------------------------

[global_attributes.activity_id]
severity = "H"
expected_type = "str"

[global_attributes.contact]
severity = "H"
expected_type = "str"
constraint = ""

[global_attributes.creation_date]
severity = "H"
expected_type = "str"

[global_attributes.domain_id]
severity = "H"
expected_type = "str"

[global_attributes.domain]
severity = "H"
expected_type = "str"

[global_attributes.driving_experiment_id]
severity = "H"
expected_type = "str"

[global_attributes.driving_experiment]
severity = "H"
expected_type = "str"

[global_attributes.driving_institution_id]
severity = "H"
expected_type = "str"

[global_attributes.driving_institution]
severity = "H"
expected_type = "str"

[global_attributes.driving_source_id]
severity = "H"
expected_type = "str"

[global_attributes.driving_variant_label]
severity = "H"
expected_type = "str"

[global_attributes.frequency]
severity = "H"
expected_type = "str"

[global_attributes.grid]
severity = "H"
expected_type = "str"

[global_attributes.institution_id]
severity = "H"
expected_type = "str"

[global_attributes.institution]
severity = "H"
expected_type = "str"

[global_attributes.license]
severity = "H"
expected_type = "str"

[global_attributes.mip_era]
severity = "H"
expected_type = "str"

[global_attributes.product]
severity = "H"
expected_type = "str"

[global_attributes.project_id]
severity = "H"
expected_type = "str"

[global_attributes.source_id]
severity = "H"
expected_type = "str"

[global_attributes.source]
severity = "H"
expected_type = "str"

[global_attributes.source_type]
severity = "H"
expected_type = "str"

[global_attributes.tracking_id]
severity = "H"
expected_type = "str"

[global_attributes.variable_id]
severity = "H"
expected_type = "str"

[global_attributes.version_realization]
severity = "H"
expected_type = "str"

# ==============================================================================
# == Checks Variable registry
# ==============================================================================
#To activate Variable regisrty checks
[variable_registry_checks]
severity = "H"

# ==============================================================================
# == Consistency Checks
# ==============================================================================

[consistency_checks]
  [consistency_checks.variant_label]
  severity = "H"
  [consistency_checks.filename_vs_attributes]
  severity = "H"
  [consistency_checks.experiment_details]
  severity = "H"
  
  [consistency_checks.institution_details]
  severity = "H"

  [consistency_checks.source_details]
  severity = "H"

# Check frequency and table_id consistency via tha mapping below
[freq_table_id_consistency_checks]
severity = "H"


# ==============================================================================
# == Mappings for frequency/table_id Consistency Checks
# ==============================================================================
[frequency_table_id_mapping]
mon = ["mon"]
day = ["day"]
1hr = ["6hr"]
6hr = ["1hr"]
