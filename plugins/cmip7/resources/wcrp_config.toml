# ==============================================================================
# CMIP7 Configuration FILE
# ==============================================================================
project_name = "cmip7"
project_version = "1.0"

# ==============================================================================
#  Important Notes
# ==============================================================================

#  
* Many of the DRS, CV, and variable registry checks will not pass or run correctly at the moment :
   	- This is expected, because the esgvoc library does not yet include the CMIP7 controlled vocabulary definitions required for validation.
   	
* The variable mapping file (mapping_variables.toml) currently acts as a temporary bridge, manually linking table and variable identifiers for CMIP7 datasets
		
* Once ESGVOC provides official CMIP7 vocabulary support, this mapping file will no longer be needed : 
    	- CMIP7 introduces a global attribute suffix branded variable that removes the need for hard-coded mapping between table_id and variable_id.
   	- When that feature becomes operational in the CMIP7 CV, the plugin will dynamically resolve variable identities without local TOML mappings."

#------------------------------------------------------------------------------
# DRS Checks
# ------------------------------------------------------------------------------

[drs_checks]
severity = "H"

[drs_consistency_checks]
severity = "H"

#------------------------------------------------------------------------------
# Global Attributes to check 
# ------------------------------------------------------------------------------
# ======================================================================
# == Auto-generated Global Attribute Checks (from attached NetCDF file)
# ======================================================================

[global_attributes.Conventions]
severity = "H"
expected_type = "str"

[global_attributes.activity_id]
severity = "H"
expected_type = "str"

[global_attributes.archive_id]
severity = "M"
expected_type = "str"

[global_attributes.area_label]
severity = "M"
expected_type = "str"

[global_attributes.branch_method]
severity = "M"
expected_type = "str"

[global_attributes.branch_time_in_child]
severity = "M"
expected_type = "float"

[global_attributes.branch_time_in_parent]
severity = "M"
expected_type = "float"

[global_attributes.branding_suffix]
severity = "M"
expected_type = "str"

[global_attributes.creation_date]
severity = "M"
expected_type = "str"

[global_attributes.cv_version]
severity = "M"
expected_type = "str"

[global_attributes.drs_specs]
severity = "M"
expected_type = "str"

[global_attributes.end_year]
severity = "M"
expected_type = "str"

[global_attributes.experiment]
severity = "M"
expected_type = "str"

[global_attributes.experiment_id]
severity = "H"
expected_type = "str"

[global_attributes.external_variables]
severity = "M"
expected_type = "str"

[global_attributes.forcing_index]
severity = "H"
expected_type = "str"

[global_attributes.region]
severity = "M"
expected_type = "str"

[global_attributes.release_year]
severity = "M"
expected_type = "str"

[global_attributes.source]
severity = "M"
expected_type = "str"

[global_attributes.source_id]
severity = "H"
expected_type = "str"

[global_attributes.source_type]
severity = "M"
expected_type = "str"

[global_attributes.start_year]
severity = "M"
expected_type = "str"

[global_attributes.table_id]
severity = "H"
expected_type = "str"

[global_attributes.table_info]
severity = "M"
expected_type = "str"

[global_attributes.temporal_label]
severity = "M"
expected_type = "str"

[global_attributes.title]
severity = "M"
expected_type = "str"

[global_attributes.variable_id]
severity = "H"
expected_type = "str"

[global_attributes.variant_label]
severity = "H"
expected_type = "str"

[global_attributes.vertical_label]
severity = "M"
expected_type = "str"

[global_attributes.license]
severity = "H"
expected_type = "str"

[global_attributes.cmor_version]
severity = "M"
expected_type = "str"

[global_attributes.tracking_id]
severity = "L"
expected_type = "str"

# ==============================================================================
# == Checks Variable registry
# ==============================================================================
#To activate Variable regisrty checks
[variable_registry_checks]
severity = "H"
# ==============================================================================
# == Data Plausibility Checks
# ==============================================================================
[data_plausibility_checks]
# Project name (must match the “projects” key in your outliers_thresholds.json)
project = "CMIP"

[data_plausibility_checks.check_nan_inf]
enabled = true
severity = "H"

[data_plausibility_checks.check_fill_missing]
enabled = true
severity = "M"

[data_plausibility_checks.check_constant]
enabled = true
severity = "M"

[data_plausibility_checks.check_physically_impossible_outlier]
enabled = true
severity = "H"

[data_plausibility_checks.check_spatial_statistical_outliers]
enabled = true
severity = "M"
threshold = 5
method = "Z-Score"

[data_plausibility_checks.check_chunk_size]
enabled = true
severity = "M"


# ==============================================================================
# == Consistency Checks
# ==============================================================================

[consistency_checks]
  [consistency_checks.variant_label]
  severity = "H"
  [consistency_checks.filename_vs_attributes]
  severity = "H"
  [consistency_checks.experiment_details]
  severity = "H"
  
  [consistency_checks.institution_details]
  severity = "H"

  [consistency_checks.source_details]
  severity = "H"

# Check frequency and table_id consistency via tha mapping below
[freq_table_id_consistency_checks]
severity = "H"


# ==============================================================================
# == Mappings for frequency/table_id Consistency Checks
# ==============================================================================
[frequency_table_id_mapping]
AERday = ["day"]
AERhr = ["1hr"]
AERmon = ["mon"]
AERmonZ = ["mon"]
Aclim = ["monClim"]
Amon = ["mon", "monC", "monClim"]
AmonExtras = ["mon"]
CF3hr = ["3hrPt"]
CFday = ["day"]
CFmon = ["mon"]
CFsubhr = ["subhrPt"]
cf3hr = ["3hr"]
cfDay = ["day"]
cfMon = ["mon"]
cfOff = ["mon"]
cfSites = ["3hr", "6hr", "subhr"]
day = ["day"]
dayExtras = ["day"]
E1hr = ["1hr", "1hrPt"]
E1hrClimMon = ["1hrCM"]
E3hr = ["3hr"]
E3hrPt = ["3hrPt"]
E6hrZ = ["6hr", "6hrPt"]
Eday = ["day"]
EdayZ = ["day"]
Emon = ["mon"]
EmonZ = ["mon"]
Esubhr = ["subhrPt"]
Eyr = ["yr", "yrPt"]
HOMAL3hrPt = ["3hrPt", "3hr"]
HOMALmon = ["mon"]
HOMEPmon = ["mon"]
HOMOImon = ["mon"]
IyrAnt = ["yr"]
IyrGre = ["yr"]
ImonAnt = ["mon"]
ImonGre = ["mon"]
LIclim = ["monClim"]
LImon = ["mon"]
Lclim = ["monClim"]
Lmon = ["mon"]
Oclim = ["monClim", "monC"]
Oday = ["day"]
Odec = ["dec"]
OIclim = ["monClim"]
OImon = ["mon"]
Omon = ["mon"]
OmonExtras = ["mon"]
Oyr = ["yr"]
OyrExtras = ["yr"]
SIday = ["day"]
SImon = ["mon", "monPt"]
sites = ["subhr"]
3hr = ["3hr", "3hrPt"]
3hrCurt = ["3hr"]
3hrMlev = ["3hr"]
3hrPlev = ["3hr"]
3hrSlev = ["3hr"]
6hrLev = ["6hr", "6hrPt"]
6hrPlev = ["6hr"]
6hrPlevPt = ["6hr", "6hrPt"]
